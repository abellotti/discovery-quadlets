#!/bin/bash
read -s -p "Enter the Discovery Django secret key: " discovery_django_secret_key
echo
if [ -z "${discovery_django_secret_key}" ]; then
  echo "The Discovery Django secret key cannot be empty."
  exit 1
fi
read -s -p "Re-enter the secret key: " discovery_django_secret_key2
echo
if [ ! "${discovery_django_secret_key}" = "${discovery_django_secret_key2}" ]; then
  echo "Discovery Django secret keys do not match."
  exit 1
fi

podman secret rm discovery-django-secret-key >/dev/null 2>&1
printf "${discovery_django_secret_key}" | podman secret create discovery-django-secret-key -
podman secret ls --filter name=discovery-django-secret-key
